"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var app = require("tns-core-modules/application");
var enums = require("tns-core-modules/ui/enums");
var modal_dialog_1 = require("nativescript-angular/modal-dialog");
var observable_array_1 = require("tns-core-modules/data/observable-array");
var dataItem_service_1 = require("../dataItem.service");
var animation_1 = require("ui/animation");
var modalViewModulets = "ns-ui-category/modal-view/basics/modal-ts-view-page";
var BrowseComponent = /** @class */ (function () {
    // << animation-animating-properties-code
    function BrowseComponent(_dataItemService, modalService, vcRef) {
        this._dataItemService = _dataItemService;
        this.modalService = modalService;
        this.vcRef = vcRef;
        this.isAfficher = true;
        this.isVisible1 = false;
        this.isVisible2 = false;
        this.isVisible3 = false;
        this.isVisible4 = false;
        this.isUn = true;
        this.isDeux = false;
        this.isTrois = false;
        // Use the component constructor to inject providers.
    }
    BrowseComponent.prototype.animate = function (image) {
        var _this = this;
        // >> animation-animating-properties-code
        image.animate({
            opacity: 0,
            // backgroundColor: new Color("Blue"),
            translate: { x: 0, y: 0 },
            scale: { x: 1, y: 1 },
            rotate: 0,
            duration: 5000,
            delay: 50,
            iterations: 1,
            curve: enums.AnimationCurve.easeInOut
        }).then(function () {
            console.log("Animation finished.");
            _this.isUn = false;
            _this.isDeux = true;
        }).catch(function (e) {
            console.log(e.message);
        });
        // << animation-animating-properties-code
    };
    BrowseComponent.prototype.animate2 = function (image) {
        var _this = this;
        // >> animation-animating-properties-code
        image.animate({
            opacity: 0,
            // backgroundColor: new Color("Blue"),
            translate: { x: 0, y: 0 },
            scale: { x: 1, y: 1 },
            rotate: 0,
            duration: 5000,
            delay: 0,
            iterations: 1,
            curve: enums.AnimationCurve.easeInOut
        }).then(function () {
            console.log("Animation finished.");
            _this.isDeux = false;
            _this.isTrois = true;
        }).catch(function (e) {
            console.log(e.message);
        });
        // << animation-animating-properties-code
    };
    BrowseComponent.prototype.animate3 = function (image) {
        // >> animation-animating-properties-code
        image.animate({
            opacity: 1,
            // backgroundColor: new Color("Blue"),
            translate: { x: 0, y: 0 },
            scale: { x: 1, y: 1 },
            rotate: 0,
            duration: 5000,
            delay: 0,
            iterations: 1,
            curve: enums.AnimationCurve.easeInOut
        }).then(function () {
            console.log("Animation finished.");
        }).catch(function (e) {
            console.log(e.message);
        });
        // << animation-animating-properties-code
    };
    BrowseComponent.prototype.ngOnInit = function () {
        // Init your component properties here.
        this._dataItems = new observable_array_1.ObservableArray(this._dataItemService.getVariableWidthItems());
        this._selectedItems = "No Selected items.";
    };
    BrowseComponent.prototype.test1 = function () {
    };
    BrowseComponent.prototype.test2 = function () {
        alert("ok1");
    };
    BrowseComponent.prototype.test3 = function () {
        alert("ok1");
    };
    BrowseComponent.prototype.test4 = function () {
        if (this.isVisible4) {
            this.isVisible4 = false;
        }
        else {
            this.isVisible4 = true;
        }
    };
    BrowseComponent.prototype.infoDoc = function (StLy) {
        this.onAnimate(StLy); //rends invisible toto
        //this.animate0;
    };
    BrowseComponent.prototype.infoDoc2 = function (StLy) {
        this.onAnimate2(StLy); //rends visible toto
        //this.animate0;
    };
    BrowseComponent.prototype.FadeSlider = function (AbLy) {
        this.onAnimate3(AbLy); //rends visible toto
        //this.animate0;
    };
    Object.defineProperty(BrowseComponent.prototype, "selectedItems", {
        get: function () {
            return this._selectedItems;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BrowseComponent.prototype, "dataItems", {
        get: function () {
            return this._dataItems;
        },
        enumerable: true,
        configurable: true
    });
    BrowseComponent.prototype.Loaded = function (args) {
        var page = args.object;
        this.view = page.getViewById("view");
        console.log('ok');
    };
    BrowseComponent.prototype.onAnimate = function (view) {
        view.animate({ opacity: 1 })
            .then(function () { return view.animate({ opacity: 0 }); })
            .then(function () {
            console.log("Animation finished 1");
        })
            .catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.onAnimate2 = function (view) {
        view.animate({ opacity: 1 })
            .then(function () { return view.animate({ opacity: 1 }); })
            .then(function () {
            console.log("Animation finished 2");
        })
            .catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.onAnimate3 = function (AbLy) {
        this.animationSet = new animation_1.Animation([{
                target: AbLy,
                opacity: 0,
                duration: 5000,
                iterations: Number.POSITIVE_INFINITY,
            }]);
        this.animationSet.play().catch(function (e) {
            console.log("Animation stoppped!");
        });
        // Call animationSet.cancel() to stop it;
    };
    BrowseComponent.prototype.zoom = function (view) {
        view.animate({ opacity: 0 })
            .then(function () { return view.animate({ scale: { x: 2, y: 2 } }); })
            .then(function () { return view.animate({ translate: { x: 100, y: -100 } }); })
            .then(function () { return view.animate({ opacity: 1 }); })
            .then(function () {
            console.log("Animation finished 2");
        })
            .catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.onDrawerButtonTap = function () {
        var sideDrawer = app.getRootView();
        sideDrawer.showDrawer();
    };
    BrowseComponent = __decorate([
        core_1.Component({
            selector: "Browse",
            moduleId: module.id,
            providers: [dataItem_service_1.DataItemService],
            templateUrl: "./browse.component.html",
            styleUrls: ["./browse-common.css"]
        }),
        __metadata("design:paramtypes", [dataItem_service_1.DataItemService, modal_dialog_1.ModalDialogService, core_1.ViewContainerRef])
    ], BrowseComponent);
    return BrowseComponent;
}());
exports.BrowseComponent = BrowseComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJvd3NlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJyb3dzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBbUU7QUFFbkUsa0RBQW9EO0FBSXBELGlEQUFtRDtBQUVuRCxrRUFBMkY7QUFHM0YsMkVBQXlFO0FBRXpFLHdEQUFzRDtBQVd0RCwwQ0FBeUM7QUFJekMsSUFBTSxpQkFBaUIsR0FBRyxxREFBcUQsQ0FBQztBQVNoRjtJQW9GWSx5Q0FBeUM7SUFDakQseUJBQW9CLGdCQUFpQyxFQUFTLFlBQWdDLEVBQVUsS0FBdUI7UUFBM0cscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFpQjtRQUFTLGlCQUFZLEdBQVosWUFBWSxDQUFvQjtRQUFVLFVBQUssR0FBTCxLQUFLLENBQWtCO1FBbkZ4SCxlQUFVLEdBQVksSUFBSSxDQUFDO1FBV3ZCLGVBQVUsR0FBYSxLQUFLLENBQUM7UUFDN0IsZUFBVSxHQUFhLEtBQUssQ0FBQztRQUM3QixlQUFVLEdBQWEsS0FBSyxDQUFDO1FBQzdCLGVBQVUsR0FBYSxLQUFLLENBQUM7UUFDN0IsU0FBSSxHQUFhLElBQUksQ0FBQztRQUN0QixXQUFNLEdBQWEsS0FBSyxDQUFDO1FBQ3pCLFlBQU8sR0FBYSxLQUFLLENBQUM7UUFtRWpDLHFEQUFxRDtJQUN6RCxDQUFDO0lBbEVHLGlDQUFPLEdBQVAsVUFBUSxLQUFZO1FBQXBCLGlCQXFCSDtRQXBCTyx5Q0FBeUM7UUFDekMsS0FBSyxDQUFDLE9BQU8sQ0FBQztZQUNWLE9BQU8sRUFBRSxDQUFDO1lBQ1gsc0NBQXNDO1lBQ3JDLFNBQVMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUN6QixLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDckIsTUFBTSxFQUFFLENBQUM7WUFDVCxRQUFRLEVBQUUsSUFBSTtZQUNk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LE1BQU0sQ0FBQyxFQUFFO1lBQ25CLFNBQVMsRUFBRSxDQUFDLGtDQUFlLENBQUM7WUFDNUIsV0FBVyxFQUFFLHlCQUF5QjtZQUN0QyxTQUFTLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQztTQUNyQyxDQUFDO3lDQXNGd0Msa0NBQWUsRUFBdUIsaUNBQWtCLEVBQWlCLHVCQUFnQjtPQXJGdEgsZUFBZSxDQTZNM0I7SUFBRCxzQkFBQztDQUFBLEFBN01ELElBNk1DO0FBN01ZLDBDQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsVmlld0NvbnRhaW5lclJlZiB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBSYWRTaWRlRHJhd2VyIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC11aS1zaWRlZHJhd2VyXCI7XG5pbXBvcnQgKiBhcyBhcHAgZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvYXBwbGljYXRpb25cIjtcbmltcG9ydCB7IENvbG9yIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvY29sb3JcIjtcbmltcG9ydCB7IExhYmVsIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvbGFiZWxcIjtcbmltcG9ydCB7IEltYWdlIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvaW1hZ2VcIjtcbmltcG9ydCAqIGFzIGVudW1zIGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL3VpL2VudW1zXCI7XG5cbmltcG9ydCB7IE1vZGFsRGlhbG9nU2VydmljZSwgTW9kYWxEaWFsb2dPcHRpb25zIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC1hbmd1bGFyL21vZGFsLWRpYWxvZ1wiO1xuXG5pbXBvcnQgeyBOYXRpdmVTY3JpcHRVSUxpc3RWaWV3TW9kdWxlLCBSYWRMaXN0Vmlld0NvbXBvbmVudCwgfSBmcm9tIFwibmF0aXZlc2NyaXB0LXVpLWxpc3R2aWV3L2FuZ3VsYXJcIjtcbmltcG9ydCB7IE9ic2VydmFibGVBcnJheSB9IGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL2RhdGEvb2JzZXJ2YWJsZS1hcnJheVwiO1xuaW1wb3J0IHsgRGF0YUl0ZW0gfSBmcm9tIFwiLi4vZGF0YUl0ZW1cIjtcbmltcG9ydCB7IERhdGFJdGVtU2VydmljZSB9IGZyb20gXCIuLi9kYXRhSXRlbS5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBMaXN0Vmlld0V2ZW50RGF0YSwgUmFkTGlzdFZpZXcsIExpc3RWaWV3R3JpZExheW91dCB9IGZyb20gXCJuYXRpdmVzY3JpcHQtdWktbGlzdHZpZXdcIjtcblxuaW1wb3J0IHsgU3RhY2tMYXlvdXQgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy91aS9sYXlvdXRzL3N0YWNrLWxheW91dC9zdGFjay1sYXlvdXRcIjtcbmltcG9ydCB7IEFic29sdXRlTGF5b3V0IH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvbGF5b3V0cy9hYnNvbHV0ZS1sYXlvdXQvYWJzb2x1dGUtbGF5b3V0XCI7XG5pbXBvcnQgeyBFdmVudERhdGEgfSBmcm9tIFwiZGF0YS9vYnNlcnZhYmxlXCI7XG5pbXBvcnQgeyBQYWdlIH0gZnJvbSBcInVpL3BhZ2VcIjtcbmltcG9ydCB7IEdyaWRMYXlvdXQgIH0gZnJvbSBcInVpL2xheW91dHMvZ3JpZC1sYXlvdXRcIjtcbiAgICBcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwidWkvY29yZS92aWV3XCI7XG5pbXBvcnQgeyBXcmFwTGF5b3V0IH0gZnJvbSBcInVpL2xheW91dHMvd3JhcC1sYXlvdXRcIjtcbmltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gXCJ1aS9hbmltYXRpb25cIjtcblxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvYnV0dG9uXCI7XG5cbmNvbnN0IG1vZGFsVmlld01vZHVsZXRzID0gXCJucy11aS1jYXRlZ29yeS9tb2RhbC12aWV3L2Jhc2ljcy9tb2RhbC10cy12aWV3LXBhZ2VcIjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwiQnJvd3NlXCIsXG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCxcbiAgICBwcm92aWRlcnM6IFtEYXRhSXRlbVNlcnZpY2VdLFxuICAgIHRlbXBsYXRlVXJsOiBcIi4vYnJvd3NlLmNvbXBvbmVudC5odG1sXCIsXG4gICAgc3R5bGVVcmxzOiBbXCIuL2Jyb3dzZS1jb21tb24uY3NzXCJdXG59KVxuZXhwb3J0IGNsYXNzIEJyb3dzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgcHVibGljIHZpZXc6IFZpZXc7ICAgIFxuICAgIHB1YmxpYyBpc0FmZmljaGVyOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwcml2YXRlIF9kYXRhSXRlbXM6IE9ic2VydmFibGVBcnJheTxEYXRhSXRlbT47XG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRJdGVtczogc3RyaW5nOyAgICBcbiAgICBwdWJsaWMgYW5pbWF0aW9uU2V0OiBBbmltYXRpb247XG4gICAgcHVibGljIENBTWVkaWFUaW1pbmdGdW5jdGlvbjphbnk7XG4gICAgcHVibGljIHN0YXJ0RGF0ZTogRGF0ZTtcbiAgICBwdWJsaWMgZW5kRGF0ZTogRGF0ZTtcbiAgICBwdWJsaWMgc2VsZWN0ZWREYXRlOiBEYXRlO1xuICAgIHB1YmxpYyBkYXlzOiBudW1iZXI7XG5cblxuICAgICAgICBwdWJsaWMgaXNWaXNpYmxlMSA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHVibGljIGlzVmlzaWJsZTIgOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHB1YmxpYyBpc1Zpc2libGUzIDogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwdWJsaWMgaXNWaXNpYmxlNCA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHVibGljIGlzVW4gOiBib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgcHVibGljIGlzRGV1eCA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHVibGljIGlzVHJvaXMgOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAgICAgYW5pbWF0ZShpbWFnZTogSW1hZ2UpIHtcbiAgICAgICAgICAgIC8vID4+IGFuaW1hdGlvbi1hbmltYXRpbmctcHJvcGVydGllcy1jb2RlXG4gICAgICAgICAgICBpbWFnZS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgLy8gYmFja2dyb3VuZENvbG9yOiBuZXcgQ29sb3IoXCJCbHVlXCIpLFxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgICAgICAgICAgc2NhbGU6IHsgeDogMSwgeTogMSB9LFxuICAgICAgICAgICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwMCxcbiAgICAgICAgICAgICAgICBkZWxheTogNTAsXG4gICAgICAgICAgICAgICAgaXRlcmF0aW9uczogMSxcbiAgICAgICAgICAgICAgICBjdXJ2ZTogZW51bXMuQW5pbWF0aW9uQ3VydmUuZWFzZUluT3V0XG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBmaW5pc2hlZC5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1VuICA9IGZhbHNlO1xuICAgICAgICAgdGhpcy5pc0RldXggID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gPDwgYW5pbWF0aW9uLWFuaW1hdGluZy1wcm9wZXJ0aWVzLWNvZGVcbiAgICB9XG4gICAgYW5pbWF0ZTIoaW1hZ2U6IEltYWdlKSB7XG4gICAgICAgIC8vID4+IGFuaW1hdGlvbi1hbmltYXRpbmctcHJvcGVydGllcy1jb2RlXG4gICAgICAgIGltYWdlLmFuaW1hdGUoe1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgLy8gYmFja2dyb3VuZENvbG9yOiBuZXcgQ29sb3IoXCJCbHVlXCIpLFxuICAgICAgICAgICAgdHJhbnNsYXRlOiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgICAgICAgIHNjYWxlOiB7IHg6IDEsIHk6IDEgfSxcbiAgICAgICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLFxuICAgICAgICAgICAgZGVsYXk6IDAsXG4gICAgICAgICAgICBpdGVyYXRpb25zOiAxLFxuICAgICAgICAgICAgY3VydmU6IGVudW1zLkFuaW1hdGlvbkN1cnZlLmVhc2VJbk91dFxuICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9uIGZpbmlzaGVkLlwiKTtcbiAgICAgICAgICAgIHRoaXMuaXNEZXV4ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzVHJvaXMgPSB0cnVlO1xuICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIDw8IGFuaW1hdGlvbi1hbmltYXRpbmctcHJvcGVydGllcy1jb2RlXG59XG5hbmltYXRlMyhpbWFnZTogSW1hZ2UpIHtcbiAgICAvLyA+PiBhbmltYXRpb24tYW5pbWF0aW5nLXByb3BlcnRpZXMtY29kZVxuICAgIGltYWdlLmFuaW1hdGUoe1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgIC8vIGJhY2tncm91bmRDb2xvcjogbmV3IENvbG9yKFwiQmx1ZVwiKSxcbiAgICAgICAgdHJhbnNsYXRlOiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgICAgc2NhbGU6IHsgeDogMSwgeTogMSB9LFxuICAgICAgICByb3RhdGU6IDAsXG4gICAgICAgIGR1cmF0aW9uOiA1MDAwLFxuICAgICAgICBkZWxheTogMCxcbiAgICAgICAgaXRlcmF0aW9uczogMSxcbiAgICAgICAgY3VydmU6IGVudW1zLkFuaW1hdGlvbkN1cnZlLmVhc2VJbk91dFxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBmaW5pc2hlZC5cIik7XG4gICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICB9KTtcbiAgICAvLyA8PCBhbmltYXRpb24tYW5pbWF0aW5nLXByb3BlcnRpZXMtY29kZVxufVxuICAgICAgIFxuICAgICAgICAgICAgLy8gPDwgYW5pbWF0aW9uLWFuaW1hdGluZy1wcm9wZXJ0aWVzLWNvZGVcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9kYXRhSXRlbVNlcnZpY2U6IERhdGFJdGVtU2VydmljZSxwcml2YXRlIG1vZGFsU2VydmljZTogTW9kYWxEaWFsb2dTZXJ2aWNlLCBwcml2YXRlIHZjUmVmOiBWaWV3Q29udGFpbmVyUmVmKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIGluamVjdCBwcm92aWRlcnMuXG4gICAgfVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIC8vIEluaXQgeW91ciBjb21wb25lbnQgcHJvcGVydGllcyBoZXJlLlxuICAgICAgICB0aGlzLl9kYXRhSXRlbXMgPSBuZXcgT2JzZXJ2YWJsZUFycmF5KHRoaXMuX2RhdGFJdGVtU2VydmljZS5nZXRWYXJpYWJsZVdpZHRoSXRlbXMoKSk7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkSXRlbXMgPSBcIk5vIFNlbGVjdGVkIGl0ZW1zLlwiO1xuICAgIH1cbiAgICB0ZXN0MSgpIDogdm9pZCB7XG4gICAgICAgXG4gICAgfVxuICAgIHRlc3QyKCkgOiB2b2lkIHtcbiAgICAgICAgYWxlcnQoXCJvazFcIik7XG4gICAgfSAgICBcbiAgICB0ZXN0MygpIDogdm9pZCB7XG4gICAgICAgIGFsZXJ0KFwib2sxXCIpO1xuICAgIH1cbiAgICB0ZXN0NCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlNCkge1xuICAgICAgICAgICAgdGhpcy5pc1Zpc2libGU0ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSAge1xuICAgICAgICAgICAgdGhpcy5pc1Zpc2libGU0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluZm9Eb2MoU3RMeTogR3JpZExheW91dCApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vbkFuaW1hdGUoU3RMeSk7IC8vcmVuZHMgaW52aXNpYmxlIHRvdG9cbiAgICAgICAgLy90aGlzLmFuaW1hdGUwO1xuXG4gICAgfVxuICAgIGluZm9Eb2MyKFN0THk6IEdyaWRMYXlvdXQgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub25BbmltYXRlMihTdEx5KTsgLy9yZW5kcyB2aXNpYmxlIHRvdG9cbiAgICAgICAgLy90aGlzLmFuaW1hdGUwO1xuICAgIH1cbiAgICBGYWRlU2xpZGVyKEFiTHk6IEFic29sdXRlTGF5b3V0KSB7XG4gICAgICAgIHRoaXMub25BbmltYXRlMyhBYkx5KTsgLy9yZW5kcyB2aXNpYmxlIHRvdG9cbiAgICAgICAgLy90aGlzLmFuaW1hdGUwO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWRJdGVtcygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRJdGVtcztcbiAgICB9XG4gICAgZ2V0IGRhdGFJdGVtcygpOiBPYnNlcnZhYmxlQXJyYXk8RGF0YUl0ZW0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFJdGVtcztcbiAgICB9XG4gICBcbiAgICBMb2FkZWQoYXJnczogRXZlbnREYXRhKSB7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSA8UGFnZT5hcmdzLm9iamVjdDtcbiAgICAgICAgdGhpcy52aWV3ID0gcGFnZS5nZXRWaWV3QnlJZDxWaWV3PihcInZpZXdcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdvaycpO1xuICAgIH1cbiAgICBcbiAgICBvbkFuaW1hdGUodmlldyA6IFZpZXcpIHtcbiAgICAgICAgdmlldy5hbmltYXRlKHsgb3BhY2l0eTogMSB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdmlldy5hbmltYXRlKHsgb3BhY2l0eTogMCB9KSlcbiAgICAgICAgICAgIC8vLnRoZW4oKCkgPT4gdmlldy5hbmltYXRlKHsgdHJhbnNsYXRlOiB7IHg6IDAsIHk6IC0yMzAgfSB9KSlcbiAgICAgICAgICAgIC8vLnRoZW4oKCkgPT4gU3RMeS5hbmltYXRlKHsgdHJhbnNsYXRlOiB7IHg6IDAsIHk6IDAgfSB9KSlcbiAgICAgICAgICAgIC8vLnRoZW4oKCkgPT4gdmlldy5hbmltYXRlKHsgc2NhbGU6IHsgeDogMywgeTogMyB9IH0pKVxuICAgICAgICAgICAgLy8udGhlbigoKSA9PiBTdEx5LmFuaW1hdGUoeyBzY2FsZTogeyB4OiAxLCB5OiAxIH0gfSkpXG4gICAgICAgICAgICAvLy50aGVuKCgpID0+IFN0THkuYW5pbWF0ZSh7IHJvdGF0ZTogMTgwIH0gKSlcbiAgICAgICAgICAgIC8vLnRoZW4oKCkgPT4gU3RMeS5hbmltYXRlKHsgcm90YXRlOiAwIH0gKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9uIGZpbmlzaGVkIDFcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcblxuICAgIH1cblxuICAgIG9uQW5pbWF0ZTIodmlldyA6IFZpZXcpIHtcbiAgICAgICAgdmlldy5hbmltYXRlKHsgb3BhY2l0eTogMSB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdmlldy5hbmltYXRlKHsgb3BhY2l0eTogMSB9KSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9uIGZpbmlzaGVkIDJcIik7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcblxuICAgIH1cblxuICAgXG4gICAgb25BbmltYXRlMyhBYkx5IDogQWJzb2x1dGVMYXlvdXQpICB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU2V0ID0gbmV3IEFuaW1hdGlvbihbe1xuICAgICAgICAgICAgdGFyZ2V0OiBBYkx5LFxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLFxuICAgICAgICAgICAgaXRlcmF0aW9uczogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgICAgICAgICAgLy9jdXJ2ZTogdmlldy5pb3MgPyBDQU1lZGlhVGltaW5nRnVuY3Rpb24uZnVuY3Rpb25XaXRoTmFtZShcImtDQU1lZGlhVGltaW5nRnVuY3Rpb25MaW5lYXJcIikgOiBuZXcgYW5kcm9pZC52aWV3LmFuaW1hdGlvbi5MaW5lYXJJbnRlcnBvbGF0b3JcbiAgICAgICAgfV0pO1xuICAgICAgICB0aGlzLmFuaW1hdGlvblNldC5wbGF5KCkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9uIHN0b3BwcGVkIVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENhbGwgYW5pbWF0aW9uU2V0LmNhbmNlbCgpIHRvIHN0b3AgaXQ7XG4gICAgfVxuICAgIHpvb20odmlldyA6IEltYWdlKSA6dm9pZCB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7IG9wYWNpdHk6IDAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHZpZXcuYW5pbWF0ZSh7IHNjYWxlOiB7IHg6IDIsIHk6IDIgfX0pKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdmlldy5hbmltYXRlKHsgdHJhbnNsYXRlOiB7IHg6IDEwMCwgeTogLTEwMCB9fSkpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB2aWV3LmFuaW1hdGUoeyBvcGFjaXR5OiAxIH0pKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbmltYXRpb24gZmluaXNoZWQgMlwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO1xuICAgICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgXG4gICAgb25EcmF3ZXJCdXR0b25UYXAoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNpZGVEcmF3ZXIgPSA8UmFkU2lkZURyYXdlcj5hcHAuZ2V0Um9vdFZpZXcoKTtcbiAgICAgICAgc2lkZURyYXdlci5zaG93RHJhd2VyKCk7XG4gICAgfVxuICAgIFxuICAgIFxuXG59XG4iXX0=