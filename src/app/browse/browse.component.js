"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var app = require("tns-core-modules/application");
var enums = require("tns-core-modules/ui/enums");
var modal_dialog_1 = require("nativescript-angular/modal-dialog");
var observable_array_1 = require("tns-core-modules/data/observable-array");
var dataItem_service_1 = require("../dataItem.service");
var animation_1 = require("ui/animation");
var globals_1 = require("../services/globals");
var BrowseComponent = /** @class */ (function () {
    function BrowseComponent(_dataItemService, modalService, vcRef) {
        this._dataItemService = _dataItemService;
        this.modalService = modalService;
        this.vcRef = vcRef;
        this.isAfficher = true;
        this.isVisible1 = false;
        this.isVisible2 = false;
        this.isVisible3 = false;
        this.isVisible4 = false;
        this.isUn = true;
        this.isDeux = false;
        this.isTrois = false;
        // Use the component constructor to inject providers.
        /* Contenu dynamique */
        this.chargement = globals_1.Globals.chargement;
        this.cabinet = globals_1.Globals.cabinet[0];
        this.photoCabinet = this.cabinet.photo_cabinet;
        this.nomCabinet = this.cabinet.nom_cabinet;
    }
    BrowseComponent.prototype.animateSlider = function (image) {
        var _this = this;
        image.animate({
            opacity: 0,
            // backgroundColor: new Color("Blue"),
            translate: { x: 0, y: 0 },
            scale: { x: 1, y: 1 },
            rotate: 0,
            duration: 5000,
            delay: 50,
            iterations: 1,
            curve: enums.AnimationCurve.easeInOut
        }).then(function () {
            console.log("Animation finished.");
            _this.isUn = false;
            _this.isDeux = true;
        }).catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.animate = function (image) {
        var _this = this;
        image.animate({
            opacity: 0,
            // backgroundColor: new Color("Blue"),
            translate: { x: 0, y: 0 },
            scale: { x: 1, y: 1 },
            rotate: 0,
            duration: 5000,
            delay: 50,
            iterations: 1,
            curve: enums.AnimationCurve.easeInOut
        }).then(function () {
            console.log("Animation finished.");
            _this.isUn = false;
            _this.isDeux = true;
        }).catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.animate2 = function (image) {
        var _this = this;
        image.animate({
            opacity: 0,
            duration: 5000,
            iterations: 1,
            curve: enums.AnimationCurve.easeInOut
        }).then(function () {
            console.log("Animation finished.");
            _this.isDeux = false;
            _this.isTrois = true;
        }).catch(function (e) {
            console.log(e.message);
        });
    };
    //        animate3(image: Image) {
    BrowseComponent.prototype.animate3 = function (AbLy) {
        var _this = this;
        AbLy.animate({
            opacity: 0,
            duration: 5000,
            iterations: 1,
            curve: enums.AnimationCurve.easeInOut
        }).then(function () {
            console.log("Animation finished 1.");
            _this.ImgSlider = "res://cabinet3";
            AbLy.animate({
                opacity: 1,
                duration: 3000,
                iterations: 1,
                curve: enums.AnimationCurve.easeInOut
            }).then(function () {
                console.log("Animation finished2.");
                AbLy.animate({
                    opacity: 0,
                    duration: 3000,
                    iterations: 1,
                    curve: enums.AnimationCurve.easeInOut
                }).then(function () {
                    _this.ImgSlider = "res://cabinet1";
                    console.log("Animation finished 3s.");
                    AbLy.animate({
                        opacity: 1,
                        duration: 5000,
                        iterations: 1,
                        curve: enums.AnimationCurve.easeInOut
                    }).then(function () {
                        console.log("Animation finished 3s.");
                        AbLy.animate({
                            opacity: 0,
                            duration: 3000,
                            iterations: 1,
                            curve: enums.AnimationCurve.easeInOut
                        });
                        _this.ImgSlider = "res://cabinet";
                        AbLy.animate({
                            opacity: 1,
                            duration: 3000,
                            iterations: 1,
                            curve: enums.AnimationCurve.easeInOut
                        });
                    });
                });
            });
        }).catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.ngOnInit = function () {
        // Init your component properties here.
        this._dataItems = new observable_array_1.ObservableArray(this._dataItemService.getVariableWidthItems());
        this._selectedItems = "No Selected items.";
        this.ImgSlider = "res://cabinet";
    };
    BrowseComponent.prototype.test1 = function () {
    };
    BrowseComponent.prototype.test2 = function () {
        alert("ok1");
    };
    BrowseComponent.prototype.test3 = function () {
        alert("ok1");
    };
    BrowseComponent.prototype.test4 = function () {
        if (this.isVisible4) {
            this.isVisible4 = false;
        }
        else {
            this.isVisible4 = true;
        }
    };
    BrowseComponent.prototype.infoDoc = function (StLy) {
        this.onAnimate(StLy); //rends invisible toto
        //this.animate0;
    };
    BrowseComponent.prototype.infoDoc2 = function (StLy) {
        this.onAnimate2(StLy); //rends visible toto
        //this.animate0;
    };
    BrowseComponent.prototype.FadeSlider = function (AbLy) {
        this.animate3(AbLy);
        //this.animate0;
    };
    Object.defineProperty(BrowseComponent.prototype, "selectedItems", {
        get: function () {
            return this._selectedItems;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BrowseComponent.prototype, "dataItems", {
        get: function () {
            return this._dataItems;
        },
        enumerable: true,
        configurable: true
    });
    BrowseComponent.prototype.Loaded = function (args) {
        var page = args.object;
        this.view = page.getViewById("view");
        console.log('ok');
    };
    BrowseComponent.prototype.onAnimate = function (view) {
        view.animate({ opacity: 1 })
            .then(function () { return view.animate({ opacity: 0 }); })
            .then(function () {
            console.log("Animation finished 1");
        })
            .catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.onAnimate2 = function (view) {
        view.animate({ opacity: 1 })
            .then(function () { return view.animate({ opacity: 1 }); })
            .then(function () {
            console.log("Animation finished 2");
        })
            .catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.onAnimate3 = function (AbLy) {
        this.animationSet = new animation_1.Animation([{
                target: AbLy,
                opacity: 0,
                duration: 5000,
                iterations: Number.POSITIVE_INFINITY,
            }]);
        this.animationSet.play().catch(function (e) {
            console.log("Animation stoppped!");
        });
        // Call animationSet.cancel() to stop it;
    };
    BrowseComponent.prototype.zoom = function (view) {
        view.animate({ opacity: 0 })
            .then(function () { return view.animate({ scale: { x: 2, y: 2 } }); })
            .then(function () { return view.animate({ translate: { x: 100, y: -100 } }); })
            .then(function () { return view.animate({ opacity: 1 }); })
            .then(function () {
            console.log("Animation finished 2");
        })
            .catch(function (e) {
            console.log(e.message);
        });
    };
    BrowseComponent.prototype.onDrawerButtonTap = function () {
        var sideDrawer = app.getRootView();
        sideDrawer.showDrawer();
    };
    BrowseComponent = __decorate([
        core_1.Component({
            selector: "Browse",
            moduleId: module.id,
            providers: [dataItem_service_1.DataItemService],
            templateUrl: "./browse.component.html",
            styleUrls: ["./browse-common.css"]
        }),
        __metadata("design:paramtypes", [dataItem_service_1.DataItemService, modal_dialog_1.ModalDialogService, core_1.ViewContainerRef])
    ], BrowseComponent);
    return BrowseComponent;
}());
exports.BrowseComponent = BrowseComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJvd3NlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJyb3dzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBbUU7QUFFbkUsa0RBQW9EO0FBRXBELGlEQUFtRDtBQUVuRCxrRUFBdUU7QUFFdkUsMkVBQXlFO0FBRXpFLHdEQUFzRDtBQVF0RCwwQ0FBeUM7QUFFekMsK0NBQThDO0FBVzlDO0lBNklJLHlCQUFvQixnQkFBaUMsRUFBUyxZQUFnQyxFQUFVLEtBQXVCO1FBQTNHLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBaUI7UUFBUyxpQkFBWSxHQUFaLFlBQVksQ0FBb0I7UUFBVSxVQUFLLEdBQUwsS0FBSyxDQUFrQjtRQXBJeEgsZUFBVSxHQUFZLElBQUksQ0FBQztRQVd2QixlQUFVLEdBQWEsS0FBSyxDQUFDO1FBQzdCLGVBQVUsR0FBYSxLQUFLLENBQUM7UUFDN0IsZUFBVSxHQUFhLEtBQUssQ0FBQztRQUM3QixlQUFVLEdBQWEsS0FBSyxDQUFDO1FBQzdCLFNBQUksR0FBYSxJQUFJLENBQUM7UUFDdEIsV0FBTSxHQUFhLEtBQUssQ0FBQztRQUN6QixZQUFPLEdBQWEsS0FBSyxDQUFDO1FBb0hqQyxxREFBcUQ7UUFDckQsdUJBQXVCO1FBQzNCLElBQUksQ0FBQyxVQUFVLEdBQUcsaUJBQU8sQ0FBQyxVQUFVLENBQUM7UUFDckMsSUFBSSxDQUFDLE9BQU8sR0FBRyxpQkFBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO1FBQy9DLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7SUFFM0MsQ0FBQztJQXZIRyx1Q0FBYSxHQUFiLFVBQWMsS0FBWTtRQUExQixpQkFtQkM7UUFsQkcsS0FBSyxDQUFDLE9BQU8sQ0FBQztZQUNWLE9BQU8sRUFB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dEMsQ0FBc0MsQ0FBQzthQUNsRCxJQUFJLENBQUMsY0FBTSxPQUFBLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFDLENBQUMsRUFBL0MsQ0FBK0MsQ0FBQzthQUMzRCxJQUFJLENBQUMsY0FBTSxPQUFBLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBNUIsQ0FBNEIsQ0FBQzthQUN4QyxJQUFJLENBQUM7WUFDTixPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDO2FBQ0MsS0FBSyxDQUFDLFVBQUMsQ0FBQztZQUNULE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO0lBQ1QsQ0FBQztJQUVELDJDQUFpQixHQUFqQjtRQUNJLElBQU0sVUFBVSxHQUFrQixHQUFHLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDcEQsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUF2UVEsZUFBZTtRQVAzQixnQkFBUyxDQUFDO1lBQ1AsUUFBUSxFQUFFLFFBQVE7WUFDbEIsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1lBQ25CLFNBQVMsRUFBRSxDQUFDLGtDQUFlLENBQUM7WUFDNUIsV0FBVyxFQUFFLHlCQUF5QjtZQUN0QyxTQUFTLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQztTQUNyQyxDQUFDO3lDQThJd0Msa0NBQWUsRUFBdUIsaUNBQWtCLEVBQWlCLHVCQUFnQjtPQTdJdEgsZUFBZSxDQTJRM0I7SUFBRCxzQkFBQztDQUFBLEFBM1FELElBMlFDO0FBM1FZLDBDQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsVmlld0NvbnRhaW5lclJlZiB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBSYWRTaWRlRHJhd2VyIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC11aS1zaWRlZHJhd2VyXCI7XG5pbXBvcnQgKiBhcyBhcHAgZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvYXBwbGljYXRpb25cIjtcbmltcG9ydCB7IEltYWdlIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvaW1hZ2VcIjtcbmltcG9ydCAqIGFzIGVudW1zIGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL3VpL2VudW1zXCI7XG5cbmltcG9ydCB7IE1vZGFsRGlhbG9nU2VydmljZSB9IGZyb20gXCJuYXRpdmVzY3JpcHQtYW5ndWxhci9tb2RhbC1kaWFsb2dcIjtcblxuaW1wb3J0IHsgT2JzZXJ2YWJsZUFycmF5IH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvZGF0YS9vYnNlcnZhYmxlLWFycmF5XCI7XG5pbXBvcnQgeyBEYXRhSXRlbSB9IGZyb20gXCIuLi9kYXRhSXRlbVwiO1xuaW1wb3J0IHsgRGF0YUl0ZW1TZXJ2aWNlIH0gZnJvbSBcIi4uL2RhdGFJdGVtLnNlcnZpY2VcIjtcblxuaW1wb3J0IHsgQWJzb2x1dGVMYXlvdXQgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy91aS9sYXlvdXRzL2Fic29sdXRlLWxheW91dC9hYnNvbHV0ZS1sYXlvdXRcIjtcbmltcG9ydCB7IEV2ZW50RGF0YSB9IGZyb20gXCJkYXRhL29ic2VydmFibGVcIjtcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwidWkvcGFnZVwiO1xuaW1wb3J0IHsgR3JpZExheW91dCAgfSBmcm9tIFwidWkvbGF5b3V0cy9ncmlkLWxheW91dFwiO1xuICAgIFxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJ1aS9jb3JlL3ZpZXdcIjtcbmltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gXCJ1aS9hbmltYXRpb25cIjtcblxuaW1wb3J0IHsgR2xvYmFscyB9IGZyb20gXCIuLi9zZXJ2aWNlcy9nbG9iYWxzXCI7XG5cblxuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogXCJCcm93c2VcIixcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHByb3ZpZGVyczogW0RhdGFJdGVtU2VydmljZV0sXG4gICAgdGVtcGxhdGVVcmw6IFwiLi9icm93c2UuY29tcG9uZW50Lmh0bWxcIixcbiAgICBzdHlsZVVybHM6IFtcIi4vYnJvd3NlLWNvbW1vbi5jc3NcIl1cbn0pXG5leHBvcnQgY2xhc3MgQnJvd3NlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgICAgLy8gUGFydGllIGR5bmFtaXF1ZVxuICAgIHBob3RvQ2FiaW5ldDtcbiAgICBub21DYWJpbmV0O1xuICAgIGNoYXJnZW1lbnQ6IGJvb2xlYW47XG4gICAgY2FiaW5ldDogYW55O1xuICAgIFxuXG4gICAgcHVibGljIHZpZXc6IFZpZXc7ICAgIFxuICAgIHB1YmxpYyBpc0FmZmljaGVyOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwcml2YXRlIF9kYXRhSXRlbXM6IE9ic2VydmFibGVBcnJheTxEYXRhSXRlbT47XG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRJdGVtczogc3RyaW5nOyAgICBcbiAgICBwdWJsaWMgYW5pbWF0aW9uU2V0OiBBbmltYXRpb247XG4gICAgcHVibGljIENBTWVkaWFUaW1pbmdGdW5jdGlvbjphbnk7XG4gICAgcHVibGljIHN0YXJ0RGF0ZTogRGF0ZTtcbiAgICBwdWJsaWMgZW5kRGF0ZTogRGF0ZTtcbiAgICBwdWJsaWMgc2VsZWN0ZWREYXRlOiBEYXRlO1xuICAgIHB1YmxpYyBkYXlzOiBudW1iZXI7XG5cblxuICAgICAgICBwdWJsaWMgaXNWaXNpYmxlMSA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHVibGljIGlzVmlzaWJsZTIgOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHB1YmxpYyBpc1Zpc2libGUzIDogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwdWJsaWMgaXNWaXNpYmxlNCA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHVibGljIGlzVW4gOiBib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgcHVibGljIGlzRGV1eCA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHVibGljIGlzVHJvaXMgOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHB1YmxpYyBJbWdTbGlkZXI6IHN0cmluZztcblxuXG4gICAgICAgIGFuaW1hdGVTbGlkZXIoaW1hZ2U6IEltYWdlKSB7XG4gICAgICAgICAgICBpbWFnZS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgLy8gYmFja2dyb3VuZENvbG9yOiBuZXcgQ29sb3IoXCJCbHVlXCIpLFxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgICAgICAgICAgc2NhbGU6IHsgeDogMSwgeTogMSB9LFxuICAgICAgICAgICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwMCxcbiAgICAgICAgICAgICAgICBkZWxheTogNTAsXG4gICAgICAgICAgICAgICAgaXRlcmF0aW9uczogMSxcbiAgICAgICAgICAgICAgICBjdXJ2ZTogZW51bXMuQW5pbWF0aW9uQ3VydmUuZWFzZUluT3V0XG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBmaW5pc2hlZC5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1VuICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEZXV4ICA9IHRydWU7XG4gICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgYW5pbWF0ZShpbWFnZTogSW1hZ2UpIHtcbiAgICAgICAgICAgIGltYWdlLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAvLyBiYWNrZ3JvdW5kQ29sb3I6IG5ldyBDb2xvcihcIkJsdWVcIiksXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlOiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgICAgICAgICAgICBzY2FsZTogeyB4OiAxLCB5OiAxIH0sXG4gICAgICAgICAgICAgICAgcm90YXRlOiAwLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLFxuICAgICAgICAgICAgICAgIGRlbGF5OiA1MCxcbiAgICAgICAgICAgICAgICBpdGVyYXRpb25zOiAxLFxuICAgICAgICAgICAgICAgIGN1cnZlOiBlbnVtcy5BbmltYXRpb25DdXJ2ZS5lYXNlSW5PdXRcbiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9uIGZpbmlzaGVkLlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVW4gID0gZmFsc2U7XG4gICAgICAgICB0aGlzLmlzRGV1eCAgPSB0cnVlO1xuICAgICAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5pbWF0ZTIoaW1hZ2U6IEltYWdlKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2UuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLFxuICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25zOiAxLFxuICAgICAgICAgICAgICAgICAgICBjdXJ2ZTogZW51bXMuQW5pbWF0aW9uQ3VydmUuZWFzZUluT3V0XG4gICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9uIGZpbmlzaGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RldXggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Ryb2lzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4vLyAgICAgICAgYW5pbWF0ZTMoaW1hZ2U6IEltYWdlKSB7XG4gICAgYW5pbWF0ZTMoQWJMeTogQWJzb2x1dGVMYXlvdXQpIHtcbiAgICAgICAgQWJMeS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwLFxuICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEsXG4gICAgICAgICAgICAgICAgY3VydmU6IGVudW1zLkFuaW1hdGlvbkN1cnZlLmVhc2VJbk91dFxuICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbmltYXRpb24gZmluaXNoZWQgMS5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5JbWdTbGlkZXIgPSBcInJlczovL2NhYmluZXQzXCJcbiAgICAgICAgICAgICAgICBBYkx5LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0aW9uczogMSxcbiAgICAgICAgICAgICAgICAgICAgY3VydmU6IGVudW1zLkFuaW1hdGlvbkN1cnZlLmVhc2VJbk91dFxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBmaW5pc2hlZDIuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFiTHkuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25zOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJ2ZTogZW51bXMuQW5pbWF0aW9uQ3VydmUuZWFzZUluT3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5JbWdTbGlkZXIgPSBcInJlczovL2NhYmluZXQxXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBmaW5pc2hlZCAzcy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWJMeS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnZlOiBlbnVtcy5BbmltYXRpb25DdXJ2ZS5lYXNlSW5PdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbmltYXRpb24gZmluaXNoZWQgM3MuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBYkx5LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0aW9uczogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnZlOiBlbnVtcy5BbmltYXRpb25DdXJ2ZS5lYXNlSW5PdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5JbWdTbGlkZXIgPSBcInJlczovL2NhYmluZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBYkx5LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0aW9uczogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnZlOiBlbnVtcy5BbmltYXRpb25DdXJ2ZS5lYXNlSW5PdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfZGF0YUl0ZW1TZXJ2aWNlOiBEYXRhSXRlbVNlcnZpY2UscHJpdmF0ZSBtb2RhbFNlcnZpY2U6IE1vZGFsRGlhbG9nU2VydmljZSwgcHJpdmF0ZSB2Y1JlZjogVmlld0NvbnRhaW5lclJlZikge1xuICAgICAgICAvLyBVc2UgdGhlIGNvbXBvbmVudCBjb25zdHJ1Y3RvciB0byBpbmplY3QgcHJvdmlkZXJzLlxuICAgICAgICAvKiBDb250ZW51IGR5bmFtaXF1ZSAqL1xuICAgIHRoaXMuY2hhcmdlbWVudCA9IEdsb2JhbHMuY2hhcmdlbWVudDtcbiAgICB0aGlzLmNhYmluZXQgPSBHbG9iYWxzLmNhYmluZXRbMF07XG4gICAgdGhpcy5waG90b0NhYmluZXQgPSB0aGlzLmNhYmluZXQucGhvdG9fY2FiaW5ldDtcbiAgICB0aGlzLm5vbUNhYmluZXQgPSB0aGlzLmNhYmluZXQubm9tX2NhYmluZXQ7XG5cbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAgICAgLy8gSW5pdCB5b3VyIGNvbXBvbmVudCBwcm9wZXJ0aWVzIGhlcmUuXG4gICAgICAgIHRoaXMuX2RhdGFJdGVtcyA9IG5ldyBPYnNlcnZhYmxlQXJyYXkodGhpcy5fZGF0YUl0ZW1TZXJ2aWNlLmdldFZhcmlhYmxlV2lkdGhJdGVtcygpKTtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRJdGVtcyA9IFwiTm8gU2VsZWN0ZWQgaXRlbXMuXCI7XG4gICAgICAgIHRoaXMuSW1nU2xpZGVyID0gXCJyZXM6Ly9jYWJpbmV0XCI7XG4gICAgfVxuXG4gICAgdGVzdDEoKSA6IHZvaWQge1xuICAgICAgIFxuICAgIH1cbiAgICB0ZXN0MigpIDogdm9pZCB7XG4gICAgICAgIGFsZXJ0KFwib2sxXCIpO1xuICAgIH0gICAgXG4gICAgdGVzdDMoKSA6IHZvaWQge1xuICAgICAgICBhbGVydChcIm9rMVwiKTtcbiAgICB9XG4gICAgdGVzdDQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZTQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNWaXNpYmxlNCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgIHtcbiAgICAgICAgICAgIHRoaXMuaXNWaXNpYmxlNCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbmZvRG9jKFN0THk6IEdyaWRMYXlvdXQgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub25BbmltYXRlKFN0THkpOyAvL3JlbmRzIGludmlzaWJsZSB0b3RvXG4gICAgICAgIC8vdGhpcy5hbmltYXRlMDtcblxuICAgIH1cbiAgICBpbmZvRG9jMihTdEx5OiBHcmlkTGF5b3V0ICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9uQW5pbWF0ZTIoU3RMeSk7IC8vcmVuZHMgdmlzaWJsZSB0b3RvXG4gICAgICAgIC8vdGhpcy5hbmltYXRlMDtcbiAgICB9XG5cbiAgICBGYWRlU2xpZGVyKEFiTHk6IEFic29sdXRlTGF5b3V0KSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZTMoQWJMeSk7IFxuICAgICAgICAvL3RoaXMuYW5pbWF0ZTA7XG4gICAgfVxuICAgIGdldCBzZWxlY3RlZEl0ZW1zKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZEl0ZW1zO1xuICAgIH1cbiAgICBnZXQgZGF0YUl0ZW1zKCk6IE9ic2VydmFibGVBcnJheTxEYXRhSXRlbT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YUl0ZW1zO1xuICAgIH1cbiAgIFxuICAgIExvYWRlZChhcmdzOiBFdmVudERhdGEpIHtcbiAgICAgICAgY29uc3QgcGFnZSA9IDxQYWdlPmFyZ3Mub2JqZWN0O1xuICAgICAgICB0aGlzLnZpZXcgPSBwYWdlLmdldFZpZXdCeUlkPFZpZXc+KFwidmlld1wiKTtcbiAgICAgICAgY29uc29sZS5sb2coJ29rJyk7XG4gICAgfVxuICAgIFxuICAgIG9uQW5pbWF0ZSh2aWV3IDogVmlldykge1xuICAgICAgICB2aWV3LmFuaW1hdGUoeyBvcGFjaXR5OiAxIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB2aWV3LmFuaW1hdGUoeyBvcGFjaXR5OiAwIH0pKVxuICAgICAgICAgICAgLy8udGhlbigoKSA9PiB2aWV3LmFuaW1hdGUoeyB0cmFuc2xhdGU6IHsgeDogMCwgeTogLTIzMCB9IH0pKVxuICAgICAgICAgICAgLy8udGhlbigoKSA9PiBTdEx5LmFuaW1hdGUoeyB0cmFuc2xhdGU6IHsgeDogMCwgeTogMCB9IH0pKVxuICAgICAgICAgICAgLy8udGhlbigoKSA9PiB2aWV3LmFuaW1hdGUoeyBzY2FsZTogeyB4OiAzLCB5OiAzIH0gfSkpXG4gICAgICAgICAgICAvLy50aGVuKCgpID0+IFN0THkuYW5pbWF0ZSh7IHNjYWxlOiB7IHg6IDEsIHk6IDEgfSB9KSlcbiAgICAgICAgICAgIC8vLnRoZW4oKCkgPT4gU3RMeS5hbmltYXRlKHsgcm90YXRlOiAxODAgfSApKVxuICAgICAgICAgICAgLy8udGhlbigoKSA9PiBTdEx5LmFuaW1hdGUoeyByb3RhdGU6IDAgfSApKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbmltYXRpb24gZmluaXNoZWQgMVwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuXG4gICAgfVxuXG4gICAgb25BbmltYXRlMih2aWV3IDogVmlldykge1xuICAgICAgICB2aWV3LmFuaW1hdGUoeyBvcGFjaXR5OiAxIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB2aWV3LmFuaW1hdGUoeyBvcGFjaXR5OiAxIH0pKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbmltYXRpb24gZmluaXNoZWQgMlwiKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuXG4gICAgfVxuXG4gICBvbkFuaW1hdGUzKEFiTHkgOiBBYnNvbHV0ZUxheW91dCkgIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb25TZXQgPSBuZXcgQW5pbWF0aW9uKFt7XG4gICAgICAgICAgICB0YXJnZXQ6IEFiTHksXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsXG4gICAgICAgICAgICBpdGVyYXRpb25zOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICAgICAgICAvL2N1cnZlOiB2aWV3LmlvcyA/IENBTWVkaWFUaW1pbmdGdW5jdGlvbi5mdW5jdGlvbldpdGhOYW1lKFwia0NBTWVkaWFUaW1pbmdGdW5jdGlvbkxpbmVhclwiKSA6IG5ldyBhbmRyb2lkLnZpZXcuYW5pbWF0aW9uLkxpbmVhckludGVycG9sYXRvclxuICAgICAgICB9XSk7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU2V0LnBsYXkoKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbmltYXRpb24gc3RvcHBwZWQhXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQ2FsbCBhbmltYXRpb25TZXQuY2FuY2VsKCkgdG8gc3RvcCBpdDtcbiAgICB9XG4gICAgem9vbSh2aWV3IDogSW1hZ2UpIDp2b2lkIHtcbiAgICAgICAgdmlldy5hbmltYXRlKHsgb3BhY2l0eTogMCB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdmlldy5hbmltYXRlKHsgc2NhbGU6IHsgeDogMiwgeTogMiB9fSkpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB2aWV3LmFuaW1hdGUoeyB0cmFuc2xhdGU6IHsgeDogMTAwLCB5OiAtMTAwIH19KSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHZpZXcuYW5pbWF0ZSh7IG9wYWNpdHk6IDEgfSkpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBmaW5pc2hlZCAyXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7XG4gICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25EcmF3ZXJCdXR0b25UYXAoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNpZGVEcmF3ZXIgPSA8UmFkU2lkZURyYXdlcj5hcHAuZ2V0Um9vdFZpZXcoKTtcbiAgICAgICAgc2lkZURyYXdlci5zaG93RHJhd2VyKCk7XG4gICAgfVxuICAgIFxuICAgIFxuXG59XG4iXX0=